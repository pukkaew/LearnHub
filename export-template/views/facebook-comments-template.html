<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook-Style Comments Template</title>

    <!-- Tailwind CSS (optional - CSS file has fallback utilities) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome (required for icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Facebook Comments CSS -->
    <link rel="stylesheet" href="facebook-comments.css">
</head>
<body class="bg-gray-50 min-h-screen p-4">

    <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-sm p-6">
        <h1 class="text-xl font-bold mb-6">Facebook-Style Comments</h1>

        <!-- Comments Container -->
        <div id="comments-container">

            <!-- Comment Form -->
            <div class="mb-6">
                <div class="flex items-start gap-3">
                    <img src="/images/default-avatar.png"
                         id="current-user-avatar"
                         class="w-10 h-10 rounded-full flex-shrink-0" alt="Your avatar">
                    <div class="flex-1">
                        <div class="bg-gray-100 rounded-2xl px-4 py-3">
                            <textarea id="comment-text" rows="2"
                                      class="w-full bg-transparent resize-none outline-none text-[15px]"
                                      placeholder="Write a comment..."
                                      oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px';FacebookComments.updateCharCount()"></textarea>
                        </div>
                        <div class="flex justify-between items-center mt-2 px-2">
                            <span id="char-count" class="text-xs text-gray-400">0/2000</span>
                            <button id="submit-comment"
                                    onclick="FacebookComments.submitComment()"
                                    class="px-4 py-1.5 bg-blue-500 text-white text-sm font-medium rounded-full hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed"
                                    disabled>
                                <i class="fas fa-paper-plane mr-1.5"></i>Post
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sort & Comments Header -->
            <div class="flex items-center justify-between mb-4">
                <h4 class="font-semibold text-gray-900" id="comments-count">Comments</h4>
                <div class="relative sort-dropdown-wrapper">
                    <button onclick="FacebookComments.toggleSortDropdown()"
                            class="flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900">
                        <i class="fas fa-sort-amount-down text-xs"></i>
                        <span id="sort-label">Newest</span>
                        <i class="fas fa-chevron-down text-xs"></i>
                    </button>
                    <div id="sort-dropdown" class="sort-dropdown hidden">
                        <button onclick="FacebookComments.sortComments('newest')">Newest</button>
                        <button onclick="FacebookComments.sortComments('oldest')">Oldest</button>
                        <button onclick="FacebookComments.sortComments('popular')">Most Popular</button>
                    </div>
                </div>
            </div>

            <!-- Comments List -->
            <div id="comments-list" class="space-y-4">
                <!-- Comments will be loaded here dynamically -->
                <div class="comments-empty">
                    <i class="fas fa-comments"></i>
                    <p>No comments yet</p>
                </div>
            </div>

            <!-- Load More Button -->
            <div id="load-more-container" class="hidden mt-4 text-center">
                <button onclick="FacebookComments.loadMoreComments()" class="load-more-btn">
                    <i class="fas fa-chevron-down mr-1"></i> Load more comments
                </button>
            </div>

        </div>
    </div>

    <!-- Toast Notification (simple implementation) -->
    <div id="toast" class="fixed bottom-4 right-4 hidden">
        <div class="bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg">
            <span id="toast-message"></span>
        </div>
    </div>

    <!-- Facebook Comments JS -->
    <script src="facebook-comments.js"></script>

    <script>
        // Initialize Facebook Comments
        FacebookComments.init({
            // API Configuration
            apiBase: '/api/discussions',  // Change to your API endpoint
            endpoints: {
                list: '',
                create: '',
                reply: '/:id/reply',
                edit: '/:id',
                delete: '/:id',
                react: '/:id/react',
                pin: '/:id/pin'
            },

            // Current User Info
            currentUser: {
                id: 1,
                name: 'John Doe',
                avatar: '/images/default-avatar.png',
                isAdmin: false,
                isInstructor: false
            },

            // Settings
            maxLength: 2000,
            pageSize: 10,
            defaultSort: 'newest',

            // Translations (English)
            i18n: {
                like: 'Like',
                love: 'Love',
                haha: 'Haha',
                wow: 'Wow',
                sad: 'Sad',
                angry: 'Angry',
                reply: 'Reply',
                edit: 'Edit',
                delete: 'Delete',
                pin: 'Pin',
                unpin: 'Unpin',
                cancel: 'Cancel',
                save: 'Save',
                post: 'Post',
                comments: 'Comments',
                writeComment: 'Write a comment...',
                writeReply: 'Write a reply...',
                noComments: 'No comments yet. Be the first to comment!',
                loadMore: 'Load more comments',
                pinnedBy: 'Pinned',
                instructor: 'Instructor',
                justNow: 'Just now',
                minutesAgo: 'm',
                hoursAgo: 'h',
                daysAgo: 'd',
                newest: 'Newest',
                oldest: 'Oldest',
                popular: 'Most Popular',
                replies: 'replies',
                confirmDelete: 'Are you sure you want to delete this comment?',
                successPost: 'Comment posted!',
                successReply: 'Reply posted!',
                successEdit: 'Comment updated!',
                successDelete: 'Comment deleted!',
                successPin: 'Comment pinned!',
                error: 'An error occurred'
            },

            // Toast function
            showToast: function(message, type) {
                const toast = document.getElementById('toast');
                const toastMessage = document.getElementById('toast-message');
                toastMessage.textContent = message;
                toast.classList.remove('hidden');

                // Auto hide after 3 seconds
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 3000);
            },

            // Callbacks (optional)
            onCommentPosted: function() {
                console.log('Comment posted callback');
            },
            onCommentDeleted: function() {
                console.log('Comment deleted callback');
            },
            onReactionToggled: function() {
                console.log('Reaction toggled callback');
            }
        });
    </script>

</body>
</html>
